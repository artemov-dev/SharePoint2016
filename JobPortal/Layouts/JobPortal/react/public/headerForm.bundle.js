(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{145:function(e,t){},168:function(e,t,n){"use strict";var r=n(134),i=n.n(r),o=n(135),a=n.n(o)()(i.a);a.push([e.i,"button{min-width:0}a:visited{color:unset;text-decoration:none}","",{version:3,sources:["webpack://./src/Header/headerEditPanel.scss"],names:[],mappings:"AAAA,OACI,WAAA,CAGJ,UACI,WAAA,CACA,oBAAA",sourcesContent:["button {\r\n    min-width:0;\r\n}\r\n\r\na:visited {\r\n    color: unset;\r\n    text-decoration: none;\r\n}"],sourceRoot:""}]),t.a=a},203:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.HeadEditPanel=void 0;var o=n(0);n(220);var a=n(49),u=n(155),c=n(48),l=n(4);t.HeadEditPanel=function(){var e=r(o.useState([]),2),t=e[0],n=e[1],i=r(o.useState([]),2),s=i[0],d=i[1];o.useEffect((function(){a.SPServices.getJsomListItems("","ArtDev меню","<View Scope='RecursiveAll'><Query><OrderBy><FieldRef Name='MenuOrderNumber' Ascending='TRUE' /></OrderBy></Query></View>").then((function(e){return d(e)}))}),[]),o.useEffect((function(){var e=s.filter((function(e){return null==e.Menu2Level})).map((function(e){return{name:e.Title,url:e.MenuLink,id:e.ID,edit:!1,ordernum:e.MenuOrderNumber,links:[]}}));e.map((function(e){return s.filter((function(t){return t.Title==e.name&&null!=t.Menu2Level})).map((function(t){var n;null===(n=e.links)||void 0===n||n.push({name:t.Menu2Level,url:t.MenuLink,id:t.ID,edit:!1,ordernum:t.MenuOrderNumber,links:[]})}))})),n(e)}),[s]);var f=function(e){t.forEach((function(t){var n;t.id==e.currentTarget.id&&(t.edit=!t.edit),null===(n=t.links)||void 0===n||n.forEach((function(t){t.id==e.currentTarget.id&&(t.edit=!t.edit)}))}))},m=function(e){var r=t.filter((function(t){var n;return t.links=null===(n=t.links)||void 0===n?void 0:n.filter((function(t){return t.id!=e.currentTarget.id})),t.id!=e.currentTarget.id}));n(r)},g=function(e){var n={name:"",url:"",ordernum:0,edit:!0,links:[]};t.forEach((function(t){var r,i=!1;null===(r=t.links)||void 0===r||r.forEach((function(r){var o;e.currentTarget.id==r.id&&(i=!0,n.ordernum=r.ordernum,null===(o=t.links)||void 0===o||o.push(n)),i&&(r.ordernum=r.ordernum+1)}))})),console.log(t)},v=function(e){var n=e.target;t.forEach((function(e){var t;e.id==n.id&&("url"==n.title?e.url=n.value:e.name=n.value),null===(t=e.links)||void 0===t||t.forEach((function(e){e.id==n.id&&("url"==n.title?e.url=n.value:e.name=n.value)}))}))},p=[{links:t}];return o.createElement(c.Stack,{tokens:{maxWidth:600}},o.createElement(u.Nav,{ariaLabel:"Head Edit Panel",groups:p,onRenderLink:function(e){var t={items:[{id:e.id,key:"Add",text:"Add",iconProps:{iconName:"Add"},onClick:g},{id:e.id,key:"Remove",text:"Remove",iconProps:{iconName:"Remove"},onClick:m}]};return o.createElement(o.Fragment,null,o.createElement(c.Stack,{horizontal:!0,className:l.AnimationClassNames.slideRightIn400,verticalAlign:"center"},!e.edit&&o.createElement(o.Fragment,null,o.createElement(c.Label,{id:e.id},e.name),o.createElement(c.IconButton,{iconProps:{iconName:"ChevronUp"},id:e.id,onClick:function(){}}),o.createElement(c.IconButton,{iconProps:{iconName:"ChevronDown"},id:e.id,onClick:function(){}})),e.edit&&o.createElement(o.Fragment,null,o.createElement(c.TextField,{defaultValue:e.name,disabled:!e.edit,id:e.id,title:"name",onChange:v,styles:{root:{padding:20}},autoComplete:"off"}),o.createElement(c.TextField,{defaultValue:e.url,disabled:!e.edit,id:e.id,title:"url",onChange:v,autoComplete:"off"}))),e.edit&&o.createElement(o.Fragment,null,o.createElement(c.IconButton,{iconProps:{iconName:"Save"},id:e.id,onClick:f}),o.createElement(c.IconButton,{menuProps:t})))},onLinkClick:function(e){var n=e.target.tagName;if("SPAN"==n||"LABEL"==n){var r=e.currentTarget.getElementsByTagName("label").length?e.currentTarget.getElementsByTagName("label")[0].id:e.currentTarget.getElementsByTagName("button")[0].id;t.forEach((function(e){var t;e.id==r&&(e.edit=!e.edit),null===(t=e.links)||void 0===t||t.forEach((function(e){e.id==r&&(e.edit=!e.edit)}))}))}e.preventDefault()}}),o.createElement(c.Stack,{horizontal:!0,horizontalAlign:"end"},o.createElement(c.DefaultButton,{text:"Сохранить",onClick:function(){}})))}},219:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(16),o=n.n(i),a=n(203),u=n(95);Object(u.a)("/_layouts/15/JobPortal/react/public/fluenticons/",{disableWarnings:!0}),o.a.render(r.createElement(a.HeadEditPanel,null),document.getElementById("headerForm"))},220:function(e,t,n){"use strict";n.r(t);var r=n(133),i=n.n(r),o=n(168),a={insert:"head",singleton:!1};i()(o.a,a);t.default=o.a.locals||{}},49:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"SPServices",(function(){return i}));var i=function(){var t={lastStatusId:void 0};function n(){return"/"==_spPageContextInfo.webServerRelativeUrl?"":_spPageContextInfo.webServerRelativeUrl}function o(e,t,n){return new r((function(i){if(n.Attachments){var o=t.get_current().get_attachmentFiles();(function(e,t,n){return new r((function(r,i){e.load(t),e.executeQueryAsync((function(){for(var e=t.getEnumerator();e.moveNext();){var i=e.get_current();n.AttachmentFiles.push({FileName:i.get_fileName(),ServerRelativeUrl:i.get_serverRelativeUrl()})}r(n)}),(function(e,t){i(t.get_message(),t.get_stackTrace())}))}))})(e,o,n).then((function(e){i(e)}))}else i(n)}))}function a(e){if(e){var t=e.Url?e.Url:e;return-1!==t.search(/\.pdf$|\.doc$|\.xls$|\.ppt$|\.docx$|\.xlsx$|\.pptx$/gi)?t.split("?")[0]+"?Web=1":t}return"#"}return{getWebUrl:n,getSiteUrl:function(){return _spPageContextInfo.siteServerRelativeUrl},getStringParamsFromObject:function(e){return Object.keys(e).map((function(t){return encodeURI(t)+"="+encodeURI(e[t])})).join("&")},getWebApiUrlList:function(e){var t=n();return t+"/_api/web/getList('"+t+e+"')/items?"},isImage:function(e){return/(\.jpg|\.jpeg|\.png|\.bmp|\.svg)$/i.test(e)},getUrlParameterByName:function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getListItemById:function(e,t){var r=n();return r+"/_api/web/getList('"+r+e+"')/items("+t+")"},createListItem:function(t,r){var i=e.Deferred(),o=n();return fetch(o+"/_api/web/getList('"+o+t+"')/items",{method:"POST",headers:{Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":e("#__REQUESTDIGEST").val()},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){i.resolve(e.d)})).catch((function(e){i.reject(e),console.log("Не удалась создать элемент",e)})),i.promise()},deleteListItem:function(t,r){var i=e.Deferred(),o=n();return fetch(o+"/_api/web/getList('"+o+t+"')/items("+r+")",{method:"DELETE",headers:{Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":e("#__REQUESTDIGEST").val(),"IF-MATCH":"*"}}).then((function(e){i.resolve(e)})).catch((function(e){i.reject(e),console.log("Не удалась удалить элемент",e)})),i.promise()},updateListItem:function(t,i,o){return new r((function(r,a){var u=n();fetch(u+"/_api/web/getList('"+u+t+"')/items("+i+")",{method:"POST",headers:{Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":e("#__REQUESTDIGEST").val(),"IF-MATCH":"*","X-Http-Method":"MERGE"},body:JSON.stringify(o)}).then((function(e){r(e)})).catch((function(e){a(e),console.log("Не удалась обновить элемент")}))}))},getJsomListItems:function(t,n,i,a,u){return new r((function(t,c){var l=SP.ClientContext.get_current(),s=l.get_web().get_lists().getByTitle(n),d=new SP.CamlQuery;if(d.set_viewXml(i),u){var f=new SP.ListItemCollectionPosition;f.set_pagingInfo(u),d.set_listItemCollectionPosition(f)}var m=s.getItems(d);a?l.load(m,a):l.load(m),l.executeQueryAsync((function(){for(var n=m.getEnumerator(),i=[];n.moveNext();){var a=n.get_current().get_fieldValues();e.extend(a,{AttachmentFiles:[]});var u=o(l,n,a);i.push(u)}r.all(i).then((function(e){t(e)}))}),(function(e,t){c(t.get_message(),t.get_stackTrace())}))}))},isUserInGroups:function(e){return new r((function(t){void 0===e&&(e=[]);var r=n()+"/_api/web/currentuser/groups";fetch(r,{headers:{Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"}}).then((function(e){return e.json()})).then((function(n){n.d.results.map((function(n){-1!=e.indexOf(n.Title)&&t(!0)})),t(!1)})).catch((function(e){console.log("Ошибка при проверке групп пользователя",e)}))}))},addNotification:function(e,n){SP.UI.Notify&&(t.lastStatusId&&SP.UI.Status.removeStatus(t.lastStatusId),t.lastStatusId=SP.UI.Notify.addNotification(e,1==n))},getLink:a,getTarget:function(e){return-1!==a(e).search(/Web=1$/gi)?"_blank":"_self"},getHashTagLink:function(e){return n()+"/SitePages/search.aspx?#q=&advanced=1&hashtags="+e},hslToRgb:function(e,t,n){var r,i,o;if(0==t)r=i=o=n;else{var a=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},u=n<.5?n*(1+t):n+t-n*t,c=2*n-u;r=a(c,u,e+1/3),i=a(c,u,e),o=a(c,u,e-1/3)}return[Math.floor(255*r),Math.floor(255*i),Math.floor(255*o)]},setCookie:function(e,t,n,r){var i,o=new Date;""==r&&(r="/"),o.setTime(o.getTime()+24*n*60*60*1e3),i=o.toGMTString(),t=encodeURI(t),document.cookie=e+"="+t+"; path="+r+"; expires="+i},getCookie:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},getSetting:function(t,n){e.Deferred(),SP.SOD.executeFunc("sp.js","SP.ClientContext",(function(){i.getJsomListItems("","Настройки","<View Scope='Recursive'><Query></Query></View>").then((function(e){var r=e.filter((function(e){return e.Title===t}));1==r.length&&n(r[0].SettingsValue)})).catch((function(e){return console.log("Не удалось получить данные из списка Настройки для "+t+" "+e)}))}))},isInEditMode:function(){var e=document.forms[MSOWebPartPageFormName].MSOLayout_InDesignMode;if("1"==(e=null==e?null:document.forms[MSOWebPartPageFormName].MSOLayout_InDesignMode.value))return!0;var t=document.forms[MSOWebPartPageFormName]._wikiPageMode;return"Edit"==(t=null==t?null:document.forms[MSOWebPartPageFormName]._wikiPageMode.value)},OpenModalDialog:function(e,t,n){var r=SP.UI.$create_DialogOptions();return r.url=e,r.width=t,r.height=n,SP.UI.ModalDialog.showModalDialog(r),!1}}}()}.call(this,n(52),n(97).Promise)}},[[219,0,1]]]);
//# sourceMappingURL=headerForm.bundle.js.map